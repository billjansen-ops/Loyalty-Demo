(function(){
  function findMember(){try{if(window.selectedMember&&window.selectedMember.member_id){return {id:String(window.selectedMember.member_id),name:window.selectedMember.name||""}}}catch(e){};var id="",name="";var labels=[].slice.call(document.querySelectorAll("*"));for(var i=0;i<labels.length;i++){var t=(labels[i].textContent||"").trim();if(/^member_id$/i.test(t)){var v=labels[i].nextElementSibling; if(v){id=(v.textContent||"").trim();}} if(/^name$/i.test(t)){var v2=labels[i].nextElementSibling; if(v2){name=(v2.textContent||"").trim();}}}if(!id){var m=(document.body.textContent||"").match(/member_id[^0-9]*([0-9]+)/i); if(m){id=m[1]}}return {id:id,name:name}}
  function addNav(){var host=null;var nodes=document.querySelectorAll("*");for(var i=0;i<nodes.length;i++){var n=nodes[i];var txt=(n.textContent||"").trim();if(/^Member Options$/i.test(txt)){host=n.parentElement||n;break}}
  var btn=document.createElement("button");btn.id="nav-activity";btn.type="button";btn.textContent="Activity";btn.style.cssText="display:inline-block;margin:8px 12px;padding:10px 14px;border:1px solid #d0d3da;border-radius:10px;background:#fff;cursor:pointer;font-weight:600;";btn.addEventListener("click",function(){var m=findMember();if(!m.id){var p=prompt("Enter member_id"); if(!p){return} m.id=String(p)}var q="member_id="+encodeURIComponent(m.id)+"&name="+encodeURIComponent(m.name||"");location.href="activity.html?"+q});if(host){host.appendChild(btn)}else{var dock=document.createElement("div");dock.style.cssText="position:fixed;left:16px;bottom:16px;z-index:9999";dock.appendChild(btn);document.body.appendChild(dock)}}
  function wait(){if(document.readyState==="complete"||document.readyState==="interactive"){addNav()}else{document.addEventListener("DOMContentLoaded",addNav)}}
  wait();
})();
